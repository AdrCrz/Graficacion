//import { Input } from './Input.js';
import { Obj3D } from './Obj3D.js';
//import { Canvas3D } from './Canvas3D.js';
//import { CvWireframe } from './CvWireFrame.js';
import { CvHLines } from './CvHLines.js';
import { Rota3D } from './Rota3D.js';
import { Point3D } from './Point3D.js';

let canvas: HTMLCanvasElement;
let graphics: CanvasRenderingContext2D;

canvas = <HTMLCanvasElement>document.getElementById('circlechart');
graphics = canvas.getContext('2d');

let cv: CvHLines;
let obj: Obj3D;
let ang: number=0;


const zcuartoContent = `
1 23 8 0
2 4 8 0
3 4 7 0
4 23 7 0
5 23 7 8
6 23 8 8
7 4 8 8
8 4 7 8
9 23 21 0
10 4 21 0 
11 23 21 1
12 4 21 1
13 4 8 1
14 23 8 1

15 17 1 11
16 17 2 11
17 17 2 19
18 17 1 19
19 4 1 11
20 4 2 11
21 4 2 19
22 4 1 19
23 17 2 12
24 4 2 12
25 17 6 12
26 17 6 11
27 4 6 12
28 4 6 11

29 13 9 9
30 13 21 9
31 13 21 10
32 13 9 10
33 5 21 9
34 5 21 10
35 5 9 10
36 5 9 9
37 5 21 17
38 5 9 17
39 4 21 9
40 4 9 9
41 4 21 17
42 4 9 17

43 13 8 9
44 10 9 9
45 10 8 9
46 13 6 11
47 10 6 11
48 13 6 12
49 10 6 12

50 13 9 10
51 10 9 10
52 13 8 10
53 10 8 10
54 13 8 10.5
55 10 8 10.5
56 13 7.5 10.5
57 10 7.5 10.5
58 13 7.5 11
59 10 7.5 11
60 13 7 11
61 10 7 11
62 13 7 11.5
63 10 7 11.5
64 13 6.5 11.5
65 10 6.5 11.5
66 13 6.5 12
67 10 6.5 12

68 12 21 1
69 12 21 0
70 12 22 0
71 10.5 23.5 0
72 9 24 0
73 9 24 1
74 9 21 1
75 12 22 1
76 10.5 23.5 1
77 9 21 0

78 12 21 9
79 12 22 9
80 10.5 23.5 9
81 9 24 9
82 9 24 10
83 10.5 23.5 10
84 12 22 10
85 12 21 10
86 9 21 10
87 9 21 9

88 9 21 1
89 9 24 1
90 6 24 1
91 6 21 1
92 9 21 6
93 9 24 6
94 6 24 6
95 6 21 6

96 8 22.50 3.75
97 8 23 3.75  
98 8 23.25 4
99 8 23.25 4.50
100 8 23 4.75
101 8 22.50 4.75
102 8 22.25 4.50
103 8 22.25 4
104 8.01 22.50 4.50
105 8.01 22.50 4.25
106 8.01 23 4.50
107 8.01 23 4.25
108 8 22.45 4.10
109 8 22.75 4
110 8 23.05 4.10
111 7 26 9


112 7.5 22.5 1
113 7.5 22.5 6

114 23 1 19
115 23 21 19
116 4 21 19
117 4 1 19
118 23 11 24
119 4 11 24
120 22 20 19.5
121 5 20 19.5
122 5 12 23.5
123 22 12 23.5
124 22 10 23.5 
125 5 10 23.5
126 5 2 19.5
127 22 2 19.5
128 23 3 19.5
129 23 19 19.5
130 23 11 23.5
131 4 11 23.5
132 4 3 19.5
133 4 19 19.5

134 13 8 8
135 8 8 8
136 13 8 7
137 8 8 7
138 13 7 8
139 8 7 8
140 13 7 7
141 8 7 7
142 13 7 6.5
143 8 7 6.5
144 12.5 8 7
145 8.5 8 7
146 12.5 8 6
147 8.5 8 6
148 12.5 7 7
149 8.5 7 7
150 8.5 7 6
151 12.5 7 6
152 13 8 1
153 12.5 8 1
154 12.5 7 1
155 13 7 1
156 8.5 8 1
157 8 8 1
158 8 7 1
159 8.5 7 1
160 10.75 7.75 1
161 10.75 8 1
162 10.75 8 6
163 10.75 7.75 6
164 12.5 7.75 1
165 12.5 7.75 6
166 12.25 8 3
167 11.75 8 3
168 11.25 8 3
169 11.25 8 4
170 11.25 8 5
171 11.75 8 5
172 12.25 8 5
173 12.25 8 4
174 12.25 7.75 3
175 11.75 7.75 3
176 11.25 7.75 3
177 11.25 7.75 4
178 11.25 7.75 5
179 11.75 7.75 5
180 12.25 7.75 5
181 12.25 7.75 4

182 22.5 9.25 1
183 21.5 9.25 1
184 21.5 8.25 1
185 22.5 8.25 1
186 22.5 9.25 4
187 21.5 9.25 4
188 21.5 8.25 4
189 22.5 8.25 4
190 14.5 9.25 1
191 13.5 9.25 1
192 13.5 8.25 1
193 14.5 8.25 1
194 14.5 9.25 4
195 13.5 9.25 4
196 13.5 8.25 4
197 14.5 8.25 4
198 21 9.5 1
199 15 9.5 1
200 15 8.25 1
201 21 8.25 1
202 21 9.5 2.5
203 15 9.5 2.5
204 15 8.25 2.5
205 21 8.25 2.5
206 20.5 8 3
207 15.5 8 3
208 15.5 8 6.5
209 20.5 8 6.5
210 20.25 8 3.25
211 15.75 8 3.25
212 20.25 8 6.25
213 15.75 8 6.25

214 20.5 15.5 1
215 21 15.5 1
216 21 17.5 1
217 15 17.5 1
218 15 12.5 1
219 17.25 12.5 1
220 17.25 12.75 1
221 15.75 12.75 1
222 15.25 12.75 1
223 15.25 17.25 1
224 15.75 17 1
225 20.5 17 1
226 20.5 17.25 1
227 19 17 2
228 19 15.5 2
229 17.25 15.5 1 
230 17.25 17 2 
231 15.75 15.5 2
232 17.25 14 2 
233 15.75 14 2

234 20.5 15.5 2.5
235 21 15.5 2.5
236 21 17.5 2.5
237 15 17.5 2.5
238 15 12.5 2.5
239 17.25 12.5 2.5
240 17.25 12.75 2.5
241 15.75 12.75 2.80
242 15.25 12.75 2.5
243 15.25 17.25 2.5
244 15.75 17 2.80
245 20.5 17 2.80
246 20.5 17.25 2.5
247 19 17 2.80
248 19 17 2
249 17.25 17 2
250 17.25 17 2.80 
251 15.75 15.5 2.80
252 15.75 14 2
253 15.75 14 2.80
254 15.25 12.75 2.80
255 15.25 17.25 2.80
256 20.5 17.25 2.80
257 20.5 17.25 2
258 15.75 17 2
259 15.75 12.75 2
260 17.25 12.75 2
261 17.25 15.5 2
262 20.5 15.5 2
263 15.75 12.75 2
264 15.75 17 2

265 13 6.5 1
266 8 6.5 1
267 13 6.5 0.5
268 8 6.5 0.5
269 13 6 0.5
270 8 6 0.5
271 13 6 0
272 8 6 0
273 13 7 0
274 8 7 0

275 6 11 1
276 4.5 11 1
277 4.5 9 1
278 6 9 1
279 6 11 3
280 4.5 11 3
281 4.5 9 3
282 6 9 3
283 5.5 14.25 1
284 4.75 14.25 1
285 4.75 13.25 1
286 5.5 13.25 1
287 5.75 14.5 2
288 4.5 14.5 2
289 4.5 13 2
290 5.75 13 2
291 6 20 1
292 4.5 20 1
293 4.5 16.5 1
294 6 16.5 1
295 6 20 3
296 4.5 20 3
297 4.5 16.5 3
298 6 16.5 3

299 13 17.5 1
300 8 17.5 1
301 8 11 1
302 13 11 1
303 12 15.5 1
304 9.25 15.5 1
305 10.5 13.25 1
306 11.25 14.25 1
307 10.5 15.5 1
308 10 14.25 1
309 7 13.25 10
310 5.49 13.25 10
311 5.49 9.25 10
312 7 9.25 10

313 7 13.25 14
314 5.49 13.25 14
315 5.49 9.25 14
316 7 9.25 14
317 7 11.25 10
318 5.5 11.25 10
319 7 11.25 13.99
320 5.5 11.25 13.99
321 7 13.24 13
322 5.5 13.24 13
323 5.5 9.26 13
324 7 9.26 13
325 7 11.25 13
326 5.5 11.25 13
327 7 13.25 12
328 5.5 13.24 12
329 5.5 9.26 12
330 7 9.25 12
331 7 11.25 12
332 5.5 11.25 12
333 7 9.25 11
334 7 11.25 11
335 7 10 11.75
336 7 10.5 11.75
337 7 10 10.75
338 7 10.5 10.75
339 7 12.25 10
340 7 12.25 12
341 7 12 10.75
342 7 12 11.25
343 7 12.5 10.75
344 7 12.5 11.25

345 7 17.5 10
346 5.5 17.5 10
347 5.5 14 10
348 7 14 10
349 7 17.5 12
350 5.5 17.5 12
351 5.5 14 12
352 7 14 12
353 7 14 10.5
354 7 15.5 10.5
355 5.5 15.5 10.5
356 5.5 14 10.5
357 7 15.5 11.99
358 5.5 15.5 11.99
359 7 14 11.25
360 7 15.5 11.25
361 7 14.50 11
362 7 15 11
363 7 14.50 11.75
364 7 15 11.75
365 7 15.5 10
366 5.5 15.5 10

367 9 16.5 11
368 7.5 16.5 11
369 7.5 15.25 11
370 9 15.25 11
371 9 16.5 12.25
372 9 15.25 12.25
373 9 16.5 10
374 7.5 16.5 10
375 7.5 15.25 10
376 9 15.25 10

377 5 15.50 13.75
378 5 16 13.75  
379 5 16.25 14
380 5 16.25 14.50
381 5 16 14.75
382 5 15.50 14.75
383 5 15.25 14.50
384 5 15.25 14
385 5 15.75 14.25
386 5 16 14.25
387 5 15.75 14.60

388 11.66 20.25 11.25
389 11 20.25 11.25
390 10.66 19.5 11.25
391 11.33 19 11.25
392 12 19.5 11.25
393 11.5 20 10
394 11.16 20 10
395 10.83 19.5 10
396 11.33 19.25 10
397 11.83 19.5 10

398 11 2 14
399 9 2 14
400 9 2 17
401 11 2 17
402 11 1 14
403 9 1 14
404 9 1 17
405 11 1 17
406 8 2 14
407 6 2 14
408 6 2 17
409 8 2 17
410 8 1 14
411 6 1 14
412 6 1 17
413 8 1 17
414 10 1.5 14
415 9 1.5 15.5
416 10 1.5 17
417 11 1.5 15.5
418 7 1.5 14
419 6 1.5 15.5
420 7 1.5 17
421 8 1.5 15.5

422 16.5 3.5 12
423 13 3.5 12
424 13 2.25 12
425 16.5 2.25 12
426 16.5 3.5 16
427 13 3.5 16
428 13 2.25 16
429 16.5 2.25 16
430 15.75 3.5 12
431 14.75 3.5 12
432 13.75 3.5 12
433 15.75 3.5 16
434 14.75 3.5 16
435 13.75 3.5 16
436 16.5 3.5 14
437 15.75 3.5 14
438 13.75 3.5 14
439 13 3.5 14
440 16.5 3.5 13
441 15.75 3.5 13
442 13.75 3.5 13
443 13 3.5 13

444 16.25 3.5 12.8
445 16 3.5 12.8 
446 13.5 3.5 12.8
447 13.25 3.5 12.8
448 16.25 3.5 13.8
449 16 3.5 13.8 
450 13.5 3.5 13.8
451 13.25 3.5 13.8
452 15 3.5 14.25
453 15 3.5 14.75
454 14.5 3.5 14.25
455 14.5 3.5 14.75
456 16 3.5 14.75
457 16 3.5 15.25
458 13.5 3.5 14.75
459 13.5 3.5 15.25

460 16.5 5.75 12.75
461 14.75 5.75 12.75
462 14.75 4.75 12.75
463 16.5 4.75 12.75
464 16.25 5.5 12
465 15 5.5 12
466 15 5 12
467 16.25 5 12

468 11.5 5.25 12
469 11 5 12
470 10.5 4.5 12
471 10.5 4 12
472 10.75 3.75 12
473 11.25 3.75 12
474 11.5 4.25 12
475 11.75 3.75 12
476 12.25 3.75 12
477 12.5 4 12
478 12.5 4.5 12
479 12 5 12

480 8 4 12
481 8 4 12.3
482 8 4 13
483 7 4 12
484 7 4 12.3
485 7 4 13
486 7 3.25 12
487 7 3.25 12.3
488 7 3.25 13
489 8 3.25 12 
490 8 3.25 12.3
491 8 3.25 13
492 7.62 4 12.8
493 7.37 4 12.8

494 6.75 3.75 12
495 6.75 3.75 13.25
496 5.5 3.75 12
497 5.5 3.75 13.25
498 5.5 3.5 12
499 5.5 3.5 13.25
500 6.75 3.5 12
501 6.75 3.5 13.25
502 6.75 5 12
503 6.75 5 13
504 5.5 5 12
505 5.5 5 13
506 5.5 3.75 12
507 5.5 3.75 13
508 6.75 3.75 12
509  6.75 3.75 13
510 6.75 5.25 12
511 6.75 5.25 13.25
512 5.5 5.25 12
513 5.5 5.25 13.25
514 5.5 5 12
515 5.5 5 13.25
516 6.75 5 12
517 6.75 5 13.25
518 5.5 5 12
519 5.5 5 14
520 5.25 5 12
521 5.25 5 14
522 5.25 3.75 12
523 5.25 3.75 14
524 5.5 3.75 12
525 5.5 3.75 14

526 22.25 9.25 2.5
527 22.25 9.25 3
528 22.12 9.25 3.25
529 22.12 9.25 3.5
530 21.75 9.25 2.5
531 21.75 9.25 3
532 21.87 9.25 3.25
533 21.87 9.25 3.5
534 18.5 9.5 1.75
535 18.5 9.5 2
536 18.25 9.5 1.75
537 18.25 9.5 2
538 17.75 9.5 1.25
539 17.75 9.5 2.25
540 15.25 9.5 1.25
541 15.25 9.5 2.25
542 14.25 9.25 2.5
543 14.25 9.25 3
544 14.12 9.25 3.25
545 14.12 9.25 3.5
546 13.75 9.25 2.5
547 13.75 9.25 3
548 13.87 9.25 3.25
549 13.87 9.25 3.5

550 18 9.5 1
551 18 9.5 2.5
552 16.75 9.5 1.25
553 16.75 9.5 2.25
554 15.75 9.5 1.25
555 15.75 9.5 2.25

556 6 9 2.25
557 6 11 2.25
558 6 9.75 2.75
559 6 10.25 2.75
560 6 10.75 1.5
561 6 10.75 1.75

562 6 16.5 1.66
563 6 20 1.66
564 6 16.5 2.33
565 6 20 2.33
566 6 18 1.5
567 6 18.5 1.5
568 6 18 2.25
569 6 18.5 2.25
570 6 18 2.87
571 6 18.5 2.87

572 11.41 19.7 10
573 11.41 19.3 12.2
574 11.59 19.09 12.5
575 11.54 18.8 13
576 11.56 18.5 13.5
577 11.35 19.9 10
578 11.25 20 13
579 10.5 20.25 13.3
580 10.52 20 14.5


581 11.41 19.3 12.2 
582 11.71 19.33 12.3
583 11.91 19.35 12.2 
584 11.61 19.33 12
585 11.59 19.09 12.5
586 11.49 19.12 12.6
587 11.29 19.15 12.5
588 11.39 19.12 12.3
589 11.56 19 12.8
590 11.76 18.95 12.10
591 11.96 18.93 12.8
592 11.76 18.90 12.7
593 11.54 18.8 13
594 11.34 18.5 13.15
595 11.24 18.3 13.05
596 11.44 18.4 12.95
597 11.56 18.5 13.5
598 11.76 18.2 13.7
599 11.95 18.4 13.4
600 11.66 18.6 13.3
601 11.25 20 13
602 11 20.25 13.09
603 10.87 20.15 12.99
604 10.93 20.7 12.93
605 10.5 20.25 13.3
606 10.75 20 13.5
607 11 19.80 13.4
608 10.68 20.10 13.2
609 10.51 20.10  13.8
610 10.31 20 13.7
611 10.09 19.85 14.2
612 10.41 20.05 14

613 10.52 20 14.5 
614 10.32 19.60 14.4
615 10.11 19.20 14.66
616 10.25 19.80 14.59

617 8 22 3.5
618 8 21.5 2.5
619 8 21.75 2.25
620 8 22.25 3.25
621 8 22.25 1
622 8 22.55 1
623 8 22.75 2.20
624 8 23 1
625 8 23.25 1
626 8 23.25 3.25
627 8 23.28 2.26
628 8 23.53 2.26
629 8 23.5 3.5

630 4 15.75 14.25

631 11 2.01 13
632 9 2.01 13
633 9 2.01 17.05
634 11 2.01 17.05

635 8 2.01 13
636 6 2.01 13
637 6 2.01 17.05
638 8 2.01 17.05

639 10 2.01 15
640 7 2.01 15

641 12 2 17.05
642 5 2 17.05

Faces:

88 89 90 91.92 93 94 95. 89 88 91 90. 93 92 95 94. 91 90 94 95. 90 91 95 94. 89 93. 93 89. 88 92. 92 88.
96 97 98 99 100 101 102 103. 97 96 103 102 101 100 99 98.  105 104.  107 106. 109 110 108.
617 618 619 620 621 622 623 624 625 626 627 628 629 97 96. 629 628 627 626 625 624 623 622 621 620 619 618 617 96 97.

631 632 633 634. 635 636 637 638. 632 631 634 633. 636 635 638 637. 641 642. 

4 1 9 11 14 6 5.
2 3 8 7 13 12 10.
6 7 8 5.
9 10 12 11.11 12 13 14.10 9 4 3.

15 16 26 25 23 17 18. 19 20 28 27 24 21 22.
17 21 22 18. 26 28 27 25.
25 27 24 23. 28 26 15 19.

29 30 31 32. 40 42 41 39.
40 36 29 32 35 38 42. 30 33 39 41 37 34 31.
37 41 42 38. 35 34 37 38. 
31 34 35 32. 39 30 29 40.

43 45 44 29. 45 43 46 47. 50 51 53 52. 52 53 55 54. 54 55 57 56. 
56 57 59 58. 58 59 61 60. 60 61 63 62. 62 63 65 64. 64 65 67 66. 66 67 49 48.
46 43 29 50 52 54 56 58 60 62 64 66 48. 
44 45 47 49 67 65 63 61 59 57 55 53 51.  

69 70 71 72 73 76 75 68. 77 74 73 72. 
68 75 76 73 74. 72 71 70 69 77. 
78 79 80 81 82 83 84 85. 81 87 86 82.
85 84 83 82 86. 81 80 79 78 87.




115 116 119 118 -123 122 121 120 123 -118.
116 115 118 119 -122 123 120 121 122 -119.
117 114 118 119 -125 124 127 126 125 -119.
114 117 119 118 -124 125 126 127 124 -118. 
114 115 118 -130 129 128 130 -118.115 114 118 -130 129 128 130 -118.
117 116 119 -131 132 133 131 -119.116 117 119 -131 132 133 131 -119.

8 3 4 5 -151 154 159 150 151 -5.14 152 134 6. 157 13 7 135.
137 135 134 136. 140 138 139 141.138 134. 135 139.148 149 150 151. 147 145 144 146.
140 148 154 155. 149 141 158 159. 144 136 152 153. 137 145 156 157. 147 146 151 150.
159 156 147 150. 153 154 151 146. 153 156 159 154.153 161 162 146. 160 164 165 163. 163 162 161 160.
166 168 170 172. 167 171. 173 169. 176 174 180 178. 175 179. 177 181.

182 183 184 185. 186 187 188 189. 190 191 192 193. 194 195 196 197. 198 199 200 201. 202 203 204 205. 206 207 208 209. 210 211 213 212. 198 199 203 202. 199 200 204 203. 
182 183 187 186. 183 184 188 187. 184 185 189 188. 185 182 186 189. 190 191 195 194. 191 192 196 195. 192 193 197 196. 193 190 194 197. 200 201 205 204. 201 198 202 205.

232 233. 252 253. 261 231. 231 251. 261 230. 249 250. 228 227. 248 247.
234 235 236 237 238 239 240 242 243 246. 256 255 254 241 244 245.
225 224 221 220 229 214.256 255 254 241 244 245.257 258 259 260 261 262.
235 215 216 236. 237 236 216 217. 217 218 238 237. 218 219 239 238.
239 219 229 215 235 234 262 261 260 240.239 240 260 261 262 234 235 215 229 219.
263 264 244 241. 264 257 256 244. 254 222 223 226 256 255. 222 254 255 256 226 223.

155 158 266 265. 268 267 265 266. 267 268 270 269. 272 271 269 270.
271 273 155 265 267 269. 274 272 270 268 266 158.

275 276 277 278. 279 280 281 282. 291 292 293 294. 295 296 297 298.275 276 280 279. 276 277 281 280. 277 278 282 281. 278 275 279 282. 291 292 296 295. 292 293 297 296.
283 284 288 287. 284 283 287 288. 284 285 289 288. 285 284 288 289. 285 286 290 289. 286 285 289 290. 286 283 287 290. 283 286 290 287. 293 294 298 297. 294 291 295 298.
299 300 301 302. 303 304 305. 307 308 306.

313 314 315 316. 312 311 315 316. 311 312 316 315. 317 318 320 319. 318 317 319 320. 309 310 314 313. 310 309 313 314. 310 311 315 314. 311 310 314 315. 314 313 316 315.
309 310 311 312. 321 322 323 324. 322 321 323 324. 325 326. 326 325. 327 328 329 330. 331 332. 332 331. 312 317 331 330. 317 309 327 331. 
333 334. 335 336. 337 338. 339 340. 341 342. 343 344.

349 350 351 352. 349 352 351 350. 356 353 352 351. 353 354 357 352. 354 355 358 357. 355 356 351 358. 348 352. 347 356. 345 349. 346 350. 359 360. 361 362. 363 364. 365 354. 366 355.

367 368 369 370. 368 367 370 369. 367 370 372 371. 370 367 371 372. 373 367. 376 370. 374 368. 375 369.

377 378 379 380 381 382 383 384. 385 386. 385 387.

393 394 395 396 397. 393  394 389 388. 394 395 390 389. 395 396 391 390. 396 397 392 391. 397 393 388 392.
394 393 388 389. 395 394 389 390. 396 395 390 391. 397 396 391 392. 393 397 392 388.

19 15 18 22 -402 403 404 405 402 -19 -410 411 412 413 410 -19. 
23 24 21 17 -398 401 400 399 398 -23 -406 409 408 407 406 -23.
398 399 403 402. 403 399 400 404. 404 400 401 405. 398 402 405 401.
406 407 411 410. 411 407 408 412. 412 408 409 413. 406 410 413 409.
414 416. 417 415. 418 420. 421 419.

430 433. 431 434. 432 435. 436 437. 440 441. 438 439. 442 443. 444 445. 448 449. 450 451. 446 447. 456 457. 458 459. 452 453. 454 455.
422 423 424 425. 426 427 428 429. 423 424 428 427. 424 425 429 428. 425 422 426 429. 422 423 427 426.

464 465 466 467. 464 465 461 460. 465 464 460 461. 465 466 462 461. 466 465 461 462. 466 467 463 462. 467 466 462 463. 467 464 460 463. 464 467 463 460.

468 469 470 471 472 473 474 475 476 477 478 479.

480 481. 483 484. 486 487. 489 490.  492 493.
482 485 488 491.
484 481 490 487.
481 484 485 482.
484 487 488 485. 
487 490 491 488. 
490 481 482 491. 

498 496 497 495 494 500 501 499. 494 496 497 495. 
498 500 501 499. 494 495 497 496 498 499 501 500.
510 512 513 511. 514 516 517 515.
510 511 513 512 514 515 517 516. 516 517 515 514 512 513 511 510.
503 505 507 509. 508 502 503 509.
524 518 519 525. 524 525 519 518 520 521 523 522. 524 522 523 521 520 518 519 525. 520 522 523 521.

526 530 531 527. 528 532 533 529. 542 546 547 543. 544 548 549 545. 534 536 537 535.
538 540 541 539. 550 551. 552 553. 554 555.

556 557. 558 559. 560 561.
562 563. 564 565. 566 567. 568 569. 570 571.

572 573. 573 574. 574 575. 575 576. 577 578. 578 579. 579 580.
581 582 583 584. 584 583 582 581.
585 586 587 588. 588 587 586 585.
589 590 591 592. 592 591 590 589.
593 594 595 596. 594 593 596 595.
597 598 599 600. 600 599 598 597.
601 604 603 602. 604 601 602 603.
605 608 607 606. 608 605 606 607.
609 610 611 612. 610 609 612 611.
613 614 615 616. 614 613 616 615.
`; 

window.onload = function() {
  obj = new Obj3D();
  if (obj.read(zcuartoContent)) {
    cv = new CvHLines(graphics, canvas);
    cv.setObj(obj);
    cv.paint();
  } else {
    alert('Failed to load ZCUARTO.dat content.');
  }
};


function vp(dTheta:number, dPhi:number, fRho:number):void{  // Viewpoint
  if (obj != undefined) {
    let obj: Obj3D = cv.getObj();
    if (!obj.vp(cv, dTheta, dPhi, fRho))
      alert('datos no validos');
  }
  else
    alert('aun no has leido un archivo');
}

function eyeDownFunc() {
  vp(0, 0.1, 1);
}

function eyeUpFunc() {
  vp(0, -0.1, 1);
}

function eyeLeftFunc() {
  vp(-0.1, 0, 1);
}

function eyeRightFunc() {
  vp(0.1, 0, 1);
}

function incrDistFunc() {
  vp(0, 0, 2);
}

function decrDistFunc() {
  vp(0, 0, 0.5);
}
let elevatorPosition: number = 0;
const MAX_CLICKS = 9;
function subirElevador() {
  if (elevatorPosition < MAX_CLICKS) {
    let dz = 0.99;
    for (let i = 88; i <= 110; i++) {
      obj.w[i].z += dz;
    }
    
    for (let i = 617; i <= 629; i++) {
      obj.w[i].z += dz;
    }
    elevatorPosition++;
    cv.setObj(obj);
    cv.paint();
  }
}
function bajarElevador() {
  if (elevatorPosition > 0) {
    let dz = -0.99;
    for (let i = 88; i <= 110; i++) {
      obj.w[i].z += dz;
    }
    
    for (let i = 617; i <= 629; i++) {
      obj.w[i].z += dz;
    }
    elevatorPosition--;
    cv.setObj(obj);
    cv.paint();
  }
}
function girarManecillaChicaHoraria() {
  if (!obj || !obj.w[385] || !obj.w[630]) {
    return;
  }
  let af = 5; 
  Rota3D.initRotate(obj.w[385], obj.w[630], af * Math.PI / 180);
  obj.w[386] = Rota3D.rotate(obj.w[386]);

  cv.setObj(obj);
  cv.paint();
}
function girarManecillaGrandeHoraria() {
  if (!obj || !obj.w[385] || !obj.w[630]) {
    return;
  }
  let af = 5; 
  Rota3D.initRotate(obj.w[385], obj.w[630], af * Math.PI / 180);
  obj.w[387] = Rota3D.rotate(obj.w[387]);
  cv.setObj(obj);
  cv.paint();
}
let leftCurtainPosition: number = 0; 
let rightCurtainPosition: number = 0; 
const MAX_CURTAIN_CLICKS = 9; 
function moverCortinaIzquierda() {
  if (leftCurtainPosition < MAX_CURTAIN_CLICKS) {
  let dx = -0.1;
  for (let i = 635; i <= 638; i++) {
  obj.w[i].x += dx;
  }
  leftCurtainPosition++;
  cv.setObj(obj);
  cv.paint();
  }
  }
  function cerrarCortinaIzquierda() {
  if (leftCurtainPosition > 0) {
  let dx = 0.1;
  for (let i = 635; i <= 638; i++) {
  obj.w[i].x += dx;
  }
  leftCurtainPosition--;
  cv.setObj(obj);
  cv.paint();
  }
  }
  function moverCortinaDerecha() {
  if (rightCurtainPosition < MAX_CURTAIN_CLICKS) {
  let dx = 0.1;
  for (let i = 631; i <= 634; i++) {
  obj.w[i].x += dx;
  }
  rightCurtainPosition++;
  cv.setObj(obj);
  cv.paint();
  }
  }
  function cerrarCortinaDerecha() {
  if (rightCurtainPosition > 0) {
  let dx = -0.1;
  for (let i = 631; i <= 634; i++) {
  obj.w[i].x += dx;
  }
  rightCurtainPosition--;
  cv.setObj(obj);
  cv.paint();
  }
  }

function abrirTodasCortinas() {
  moverCortinaIzquierda();
  moverCortinaDerecha();
}

function cerrarTodasCortinas() {
  cerrarCortinaIzquierda();
  cerrarCortinaDerecha();
}
function girarSillonDerecha() {
  
  if (!obj || !obj.w[229] || !obj.w[261]) {
    return;
  }
  let af = 15; 
  Rota3D.initRotate(obj.w[229], obj.w[261], af * Math.PI / 180);
  for (let i = 214; i <= 264; i++) {
    obj.w[i] = Rota3D.rotate(obj.w[i]);
  }
  cv.setObj(obj); 
  cv.paint();    
}
function girarSillonIzquierda() {
  if (!obj || !obj.w[229] || !obj.w[261]) {
    return;
  }
  let af = -15; 
  Rota3D.initRotate(obj.w[229], obj.w[261], af * Math.PI / 180);
  for (let i = 214; i <= 264; i++) {
    obj.w[i] = Rota3D.rotate(obj.w[i]);
  }
  cv.setObj(obj); 
  cv.paint();     
}




document.getElementById('eyeDown').addEventListener('click', eyeDownFunc, false);
document.getElementById('eyeUp').addEventListener('click', eyeUpFunc, false);
document.getElementById('eyeLeft').addEventListener('click', eyeLeftFunc, false);
document.getElementById('eyeRight').addEventListener('click', eyeRightFunc, false);
document.getElementById('incrDist').addEventListener('click', incrDistFunc, false);
document.getElementById('decrDist').addEventListener('click', decrDistFunc, false);


//movimiento de piezas
document.getElementById('subirElevador').addEventListener('click', subirElevador, false);
document.getElementById('bajarElevador').addEventListener('click', bajarElevador, false);
document.getElementById('girarManecillaChica').addEventListener('click', girarManecillaChicaHoraria, false);
document.getElementById('girarManecillaGrande').addEventListener('click', girarManecillaGrandeHoraria, false);
document.getElementById('abrirTodasCortinas').addEventListener('click', abrirTodasCortinas, false);
document.getElementById('cerrarTodasCortinas').addEventListener('click', cerrarTodasCortinas, false);
document.getElementById('girarSillonDerecha').addEventListener('click', girarSillonDerecha, false);
document.getElementById('girarSillonIzquierda').addEventListener('click', girarSillonIzquierda, false);





let Pix: number, Piy: number;
let Pfx: number, Pfy: number;
let theta = 0.3, phi = 1.3, SensibilidadX = 0.02, SensibilidadY = 0.02;
let flag: boolean = false;

function handleMouse(evento: any) {
  Pix=evento.offsetX;
  Piy = evento.offsetY;
  flag = true;
}

function makeVizualization(evento: any) {
  if (flag) {
    Pfx = evento.offsetX;
    Pfy = evento.offsetY;
    //console.log(Pfx, Pfy)
    let difX = Pix - Pfx;
    let difY = Pfy - Piy;
    vp(0, 0.1 * difY / 50, 1);
    Piy = Pfy;
    vp(0.1 * difX, 0 / 50, 1);
    Pix = Pfx;
    /*if( Piy>Pfy+1 ){
      phi += SensibilidadY;
      vp(0, 0.1*, 1);
      //cv.redibuja(theta, phi, tamanoObjeto);
      Piy=Pfy;
    }

    if(Pfy>Piy+1){
      phi -= SensibilidadY;
      vp(0,-0.1, 1);
      //cv.redibuja(theta, phi, tamanoObjeto);
      Piy=Pfy;
    }*/

    /*if (Pix > Pfx + 1) {
      theta += SensibilidadX;
      vp(0.1, 0, 1);
      //cv.redibuja(theta, phi, tamanoObjeto);
      Pix = Pfx;
    }
        
    if (Pfx > Pix + 1) {
      theta -= SensibilidadX;
      vp(-0.1, 0, 1);
      //cv.redibuja(theta, phi, tamanoObjeto);
      Pix = Pfx;
    }*/
  }
}

function noDraw() {
  flag = false;
}

canvas.addEventListener('mousedown', handleMouse);
canvas.addEventListener('mouseup', noDraw);
canvas.addEventListener('mousemove', makeVizualization);